---
import Layout from '../layouts/Layout.astro';
import UnifiedWartungPage from '../components/UnifiedWartungPage';
import CreditSystem from '../components/CreditSystem';
import GardenMap from '../components/GardenMap';
---

<Layout title="Wartung" description="Wartungsaufgaben und Guthaben-System f√ºr den Voigt-Garten">
  <!-- Header -->
  <section class="bg-gradient-to-b from-garden-100 to-white py-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h1 class="font-display text-4xl md:text-5xl font-bold text-garden-900 mb-4">
        Wartung & Pflege
      </h1>
      <p class="text-xl text-garden-700 max-w-2xl mx-auto">
        Alle Arbeiten im √úberblick. Wer hilft, bekommt Guthaben!
      </p>
    </div>
  </section>

  <!-- Garden Map -->
  <section class="py-8 bg-gray-50">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
      <GardenMap client:load droneImageUrl="/images/drone-view.jpg" />
    </div>
  </section>

  <!-- Main Content -->
  <section class="py-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
        <!-- Unified Kanban Board -->
        <div class="lg:col-span-3">
          <UnifiedWartungPage client:load />
        </div>

        <!-- Sidebar -->
        <div class="space-y-6">
          <!-- Credit System -->
          <div id="credits" class="bg-white rounded-xl shadow-lg p-6">
            <h3 class="font-display text-xl font-bold text-garden-900 mb-4">
              Guthaben-System
            </h3>
            <CreditSystem client:load />
          </div>

          <!-- How it works -->
          <div class="bg-garden-50 rounded-xl p-6">
            <h3 class="font-semibold text-garden-800 mb-4">So funktioniert's:</h3>
            <ol class="space-y-3 text-sm text-gray-700">
              <li class="flex gap-2">
                <span class="bg-garden-600 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold shrink-0">1</span>
                <span>Registriere dich oder melde dich an</span>
              </li>
              <li class="flex gap-2">
                <span class="bg-garden-600 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold shrink-0">2</span>
                <span>W√§hle eine Aufgabe aus</span>
              </li>
              <li class="flex gap-2">
                <span class="bg-garden-600 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold shrink-0">3</span>
                <span>Erledige die Arbeit im Garten</span>
              </li>
              <li class="flex gap-2">
                <span class="bg-garden-600 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold shrink-0">4</span>
                <span>Markiere als erledigt (optional mit Foto)</span>
              </li>
              <li class="flex gap-2">
                <span class="bg-garden-600 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold shrink-0">5</span>
                <span>Guthaben wird nach Admin-Best√§tigung gutgeschrieben!</span>
              </li>
            </ol>
          </div>

          <!-- Task Types Legend -->
          <div class="bg-white rounded-xl shadow-lg p-6">
            <h3 class="font-semibold text-gray-800 mb-4">Aufgaben-Typen:</h3>
            <div class="space-y-3 text-sm">
              <div class="flex items-center gap-3">
                <span class="bg-purple-100 text-purple-700 px-2 py-1 rounded text-xs">üîÑ 14d</span>
                <span class="text-gray-600">Wiederkehrende Aufgaben</span>
              </div>
              <div class="flex items-center gap-3">
                <span class="bg-blue-100 text-blue-700 px-2 py-1 rounded text-xs">üìã</span>
                <span class="text-gray-600">Einmalige Projekte</span>
              </div>
            </div>
          </div>

          <!-- Status Legend -->
          <div class="bg-white rounded-xl shadow-lg p-6">
            <h3 class="font-semibold text-gray-800 mb-4">Status-Farben:</h3>
            <div class="space-y-2 text-sm">
              <div class="flex items-center gap-2">
                <span class="w-3 h-3 bg-red-500 rounded-full"></span>
                <span class="text-gray-600">√úberf√§llig / Kritisch</span>
              </div>
              <div class="flex items-center gap-2">
                <span class="w-3 h-3 bg-amber-500 rounded-full"></span>
                <span class="text-gray-600">Bald f√§llig / Hoch</span>
              </div>
              <div class="flex items-center gap-2">
                <span class="w-3 h-3 bg-blue-500 rounded-full"></span>
                <span class="text-gray-600">Mittel</span>
              </div>
              <div class="flex items-center gap-2">
                <span class="w-3 h-3 bg-green-500 rounded-full"></span>
                <span class="text-gray-600">OK / Niedrig</span>
              </div>
            </div>
          </div>

          <!-- Contact for help -->
          <div class="bg-amber-50 rounded-xl p-6 border-2 border-amber-200">
            <h3 class="font-semibold text-amber-800 mb-2">Problem entdeckt?</h3>
            <p class="text-sm text-amber-700 mb-4">
              Melde M√§ngel direkt √ºber den "Mangel melden" Button. Ein Admin wird sich darum k√ºmmern.
            </p>
            <a href="/dienstleister" class="text-amber-800 hover:text-amber-900 font-medium text-sm underline">
              Dienstleister ansehen ‚Üí
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Claude Integration Info -->
  <section class="py-12 bg-purple-50 border-t border-purple-100">
    <div class="max-w-4xl mx-auto px-4 text-center">
      <div class="inline-flex items-center gap-2 bg-purple-100 text-purple-800 px-4 py-2 rounded-full text-sm font-medium mb-4">
        <span>ü§ñ</span> KI-unterst√ºtzt
      </div>
      <h2 class="font-display text-2xl font-bold text-purple-900 mb-4">
        Automatische Hilfe bei √ºberf√§lligen Aufgaben
      </h2>
      <p class="text-purple-700 max-w-2xl mx-auto">
        Wenn eine Aufgabe l√§nger als 2 Wochen √ºberf√§llig ist, kann Claude automatisch
        einen passenden Dienstleister kontaktieren. Nat√ºrlich nur nach deiner Freigabe!
      </p>
    </div>
  </section>
</Layout>
